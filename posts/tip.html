<div class="card mb-4">
  <div class="card-header">
    <h5 class="mb-0">Support DeafMan1983</h5>
  </div>
  <div class="card-body">
    <p>If you find my Linux GTK4 development tutorials helpful, consider supporting my work!</p>
    
    <div class="mb-3">
      <label for="tipAmount" class="form-label">Tip Amount ($5 - $50):</label>
      <input type="number" id="tipAmount" min="5" max="50" value="10" class="form-control mb-2">
      <div class="form-text">Amount in USD</div>
    </div>
    
    <button class="btn btn-primary w-100 mb-2" onclick="testPayment()">
      üîß Test Payment Link
    </button>
    
    <button class="btn btn-success w-100" onclick="goTip()">
      üíù Support via FaucetPay
    </button>
    
    <div class="mt-3 p-3 bg-dark rounded">
      <small class="text-muted">
        <strong>Payment Debug Info:</strong><br>
        <div id="debugInfo" class="mt-2"></div>
      </small>
    </div>
  </div>
</div>

<script>
// Replace with your ACTUAL FaucetPay address
const FAUCETPAY_ADDRESS = "jenspetereckervogt@gmail.com";

function testPayment() {
  const amount = document.getElementById('tipAmount').value;
  const debugInfo = document.getElementById('debugInfo');
  
  // Validate amount
  if (amount < 5 || amount > 50) {
    debugInfo.innerHTML = `<span class="text-danger">‚ùå Invalid amount: $${amount}. Must be between $5-$50</span>`;
    return;
  }
  
  // Construct URL
  const url = `https://faucetpay.io/merchant/send?to=${FAUCETPAY_ADDRESS}&currency=USD&amount=${amount}`;
  
  // Show debug information
  debugInfo.innerHTML = `
    <div class="text-info">
      <strong>Generated Payment URL:</strong><br>
      <small><code>${url}</code></small>
    </div>
    <div class="mt-2">
      <button class="btn btn-sm btn-outline-warning" onclick="window.open('${url}', '_blank')">
        üîó Test Open This URL
      </button>
    </div>
  `;
  
  console.log("Payment URL:", url);
}

function goTip() {
  const amount = document.getElementById('tipAmount').value;
  
  // Validate amount
  if (amount < 5 || amount > 50) {
    alert('Please enter an amount between $5 and $50');
    return;
  }
  
  const url = `https://faucetpay.io/merchant/send?to=${FAUCETPAY_ADDRESS}&currency=USD&amount=${amount}`;
  console.log("Redirecting to:", url);
  
  // Open in new tab
  window.open(url, '_blank');
}

// Test if address is valid
function validateFaucetPayAddress() {
  if (!FAUCETPAY_ADDRESS || !FAUCETPAY_ADDRESS.includes('@faucetpay.io')) {
    console.error("‚ùå Invalid FaucetPay address format");
    return false;
  }
  console.log("‚úÖ FaucetPay address format looks valid");
  return true;
}

// Run validation on page load
document.addEventListener('DOMContentLoaded', function() {
  validateFaucetPayAddress();
});
</script>
