<div class="card mb-4">
  <div class="card-header">
    <h5 class="mb-0">üíù Support DeafMan1983</h5>
  </div>
  <div class="card-body">
    <p>Support my GTK4 Linux development tutorials via FaucetPay</p>
    
    <div class="mb-3">
      <label for="paymentAmount" class="form-label">Amount (USD):</label>
      <input type="number" id="paymentAmount" min="1" max="50" value="5" class="form-control" step="0.01">
    </div>
    
    <div class="mb-3">
      <label for="userAddress" class="form-label">Your FaucetPay Address/Email:</label>
      <input type="text" id="userAddress" class="form-control" placeholder="yourusername@faucetpay.io">
    </div>
    
    <div class="mb-3">
      <label for="currency" class="form-label">Currency:</label>
      <select id="currency" class="form-select">
        <option value="BTC">Bitcoin (BTC)</option>
        <option value="LTC">Litecoin (LTC)</option>
        <option value="ETH">Ethereum (ETH)</option>
        <option value="DOGE">Dogecoin (DOGE)</option>
        <option value="USD">USD</option>
      </select>
    </div>
    
    <button class="btn btn-success w-100" onclick="createPayment()">
      üí∞ Create Payment
    </button>
    
    <div id="paymentResult" class="mt-3" style="display:none;"></div>

    <div class="mt-3">
      <label class="form-label">Quick Amounts:</label>
      <div class="btn-group w-100 flex-wrap">
        <button class="btn btn-outline-primary btn-sm mb-1" onclick="setAmount(1)">$1</button>
        <button class="btn btn-outline-primary btn-sm mb-1" onclick="setAmount(5)">$5</button>
        <button class="btn btn-outline-primary btn-sm mb-1" onclick="setAmount(10)">$10</button>
        <button class="btn btn-outline-primary btn-sm mb-1" onclick="setAmount(20)">$20</button>
        <button class="btn btn-outline-primary btn-sm mb-1" onclick="setAmount(50)">$50</button>
      </div>
    </div>
  </div>
</div>

<script>
function setAmount(amount) {
  document.getElementById('paymentAmount').value = amount;
}

async function createPayment() {
  const amount = document.getElementById('paymentAmount').value;
  const userAddress = document.getElementById('userAddress').value;
  const currency = document.getElementById('currency').value;
  const resultDiv = document.getElementById('paymentResult');
  resultDiv.style.display = 'block';

  if (!amount || amount < 1) {
    resultDiv.innerHTML = '<div class="alert alert-danger">‚ùå Please enter a valid amount.</div>';
    return;
  }
  if (!userAddress) {
    resultDiv.innerHTML = '<div class="alert alert-danger">‚ùå Please enter your FaucetPay address or email.</div>';
    return;
  }

  resultDiv.innerHTML = '<div class="alert alert-info">Processing payment...</div>';

  try {
    // call your backend proxy (you will host this on vercel or cloudflare)
    const response = await fetch('https://YOUR-BACKEND-URL/api/faucetpay-send', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ amount, currency, to: userAddress })
    });

    const data = await response.json();

    if (data.success) {
      resultDiv.innerHTML = `
        <div class="alert alert-success">
          <h6>‚úÖ Payment Created Successfully!</h6>
          <p><strong>Amount:</strong> ${amount} ${currency}</p>
          <p><strong>To:</strong> deafman1983</p>
          <p>Thank you for your support! ‚ù§Ô∏è</p>
        </div>`;
    } else {
      throw new Error(data.message || 'Payment failed');
    }
  } catch (error) {
    // fallback manual instructions
    resultDiv.innerHTML = `
      <div class="alert alert-warning">
        <h6>üîß Manual Payment Required</h6>
        <p>Due to API restrictions, please complete the payment manually:</p>
        <ol>
          <li>Login to <a href="https://faucetpay.io" target="_blank">FaucetPay.io</a></li>
          <li>Go to "Send Money"</li>
          <li>Send <strong>${amount} ${currency}</strong> to <code>deafman1983</code></li>
          <li>From your address: <code>${userAddress}</code></li>
        </ol>
        <p class="mb-0">Thank you for your support! ‚ù§Ô∏è</p>
      </div>`;
  }
}
</script>
